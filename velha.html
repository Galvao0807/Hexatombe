<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hexatombe — Jogo da Velha</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    body{background:linear-gradient(180deg,#060607 0%,#0f0f10 100%);
      color:#eee; font-family:Arial, sans-serif;
      min-height:100vh; display:flex; flex-direction:column;
      justify-content:center; align-items:center; text-align:center;}
    .blood-drops{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
    .drop{position:absolute;background:radial-gradient(circle at 30% 20%,rgba(255,0,0,0.95),rgba(160,0,0,0.9) 45%,rgba(0,0,0,0) 70%);
      border-radius:50% 50% 50% 50%/60% 60% 40% 40%;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);opacity:0.95;animation:drip linear forwards}
    @keyframes drip{0%{transform:translateY(-10vh)}100%{transform:translateY(120vh);opacity:0}}
    .cell{height:80px;width:80px}
  </style>
</head>
<body>
  <div class="blood-drops"></div>

  <header>
    <h1 class="fw-bold text-danger">VELHA — Hexatombe</h1>
    <a href="index.html" class="btn btn-sm btn-outline-light mt-2">Voltar à Home</a>
  </header>

  <main class="container text-center">
    <div class="card bg-black text-light p-4 mx-auto" style="max-width:420px">
      <h3 class="text-danger">Jogo da Velha vs CPU</h3>
      <div id="board" class="d-grid gap-2 mt-3" style="grid-template-columns: repeat(3,1fr); display:grid;">
        <button class="cell btn btn-outline-danger fs-2" data-index="0"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="1"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="2"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="3"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="4"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="5"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="6"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="7"></button>
        <button class="cell btn btn-outline-danger fs-2" data-index="8"></button>
      </div>
      <div class="mt-3">
        <button id="restart" class="btn btn-outline-light">Reiniciar</button>
      </div>
      <p id="status" class="mt-2"></p>
    </div>
  </main>

  <footer class="text-center py-4 text-muted small">© Hexatombe</footer>

  <script>
    // Gotas
    const container=document.querySelector('.blood-drops');
    function spawnDrop(){const d=document.createElement('div');d.className='drop';
      d.style.left=Math.random()*100+'%';
      d.style.width=30+Math.random()*40+'px';
      d.style.height=60+Math.random()*80+'px';
      d.style.animationDuration=(3+Math.random()*4)+'s';
      container.appendChild(d);setTimeout(()=>d.remove(),8000);}
    setInterval(spawnDrop,600);

    // Jogo da Velha
    const cells=Array.from(document.querySelectorAll('.cell'));
    const status=document.getElementById('status');
    let board=Array(9).fill(null);let turn='X';
    const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    function render(){
      cells.forEach((c,i)=>c.textContent=board[i]||'');
      const w=getWinner();
      if(w){status.textContent='Vencedor: '+w;}
      else if(board.every(Boolean)){status.textContent='Empate';}
      else{status.textContent='Turno: '+turn;}
    }
    function getWinner(){
      for(const [a,b,c] of wins){if(board[a]&&board[a]===board[b]&&board[a]===board[c])return board[a];}
      return null;
    }
    function cpuMove(){
      let move=null;
      for(const [a,b,c] of wins){
        if(board[a]==='O'&&board[b]==='O'&&!board[c])move=c;
        if(board[a]==='O'&&board[c]==='O'&&!board[b])move=b;
        if(board[b]==='O'&&board[c]==='O'&&!board[a])move=a;
      }
      if(move===null){
        for(const [a,b,c] of wins){
          if(board[a]==='X'&&board[b]==='X'&&!board[c])move=c;
          if(board[a]==='X'&&board[c]==='X'&&!board[b])move=b;
          if(board[b]==='X'&&board[c]==='X'&&!board[a])move=a;
        }
      }
      if(move===null){
        const free=board.map((v,i)=>v?null:i).filter(v=>v!==null);
        if(free.length>0)move=free[Math.floor(Math.random()*free.length)];
      }
      if(move!==null){board[move]='O';turn='X';render();}
    }
    cells.forEach((c,i)=>c.addEventListener('click',()=>{
      if(board[i]||getWinner()||turn!=='X')return;
      board[i]='X';turn='O';render();
      if(!getWinner()&&!board.every(Boolean))setTimeout(cpuMove,600);
    }));
    document.getElementById('restart').addEventListener('click',()=>{
      board=Array(9).fill(null);turn='X';render();
    });
    window.addEventListener('load',render);
  </script>
</body>
</html>
